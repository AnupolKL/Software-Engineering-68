{% extends "base.html" %}
{% block title %}จัดการช่าง | CUTCAMP{% endblock %}
{% block content %}
<section class="max-w-6xl mx-auto p-6 bg-white rounded-xl">
  <div class="flex items-center justify-between mb-4">
    <div class="flex items-center gap-4">
      <a class="text-sm text-emerald-600 hover:underline font-medium" href="{% url 'admin_dashboard' %}">&larr; กลับ</a>
      <h1 class="text-2xl font-bold text-gray-800">ช่างทั้งหมด</h1>
    </div>
    <div>
      <a href="{% url 'admin_barber_create' %}" class="inline-flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg shadow hover:bg-emerald-700">+ เพิ่มช่าง</a>
    </div>
  </div>

  <form method="get" class="flex items-center gap-3">
    <input name="q" value="{{ q }}" placeholder="ค้นหาชื่อผู้ใช้/อีเมล..." class="border rounded-lg p-2 w-full sm:w-80 shadow-sm">
    <button class="bg-emerald-600 text-white px-4 py-2 rounded-lg">ค้นหา</button>
  </form>


  <div class="mt-4 overflow-x-auto rounded-xl shadow">
    <table class="min-w-full divide-y divide-gray-200 bg-white">
      <thead class="bg-gray-50">
        <tr>
          <th class="px-4 py-3 text-left text-xs font-medium text-gray-500">ID</th>
          <th class="px-4 py-3 text-left text-xs font-medium text-gray-500">ชื่อผู้ใช้</th>
          <th class="px-4 py-3 text-left text-xs font-medium text-gray-500">อีเมล</th>
          <th class="px-4 py-3 text-left text-xs font-medium text-gray-500">สถานะ</th>
          <th class="px-4 py-3 text-center text-xs font-medium text-gray-500">จัดการ</th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-100">
        {% for b in barbers %}
          <tr class="hover:bg-gray-50">
            <td class="px-4 py-3 text-sm text-gray-700">{{ b.id }}</td>
            <td class="px-4 py-3 text-sm text-gray-700">{{ b.username }}</td>
            <td class="px-4 py-3 text-sm text-gray-700">{{ b.email|default:"-" }}</td>
            <td class="px-4 py-3 text-sm">
              {% if b.is_active %}
                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-700">ใช้งาน</span>
              {% else %}
                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-600">ปิด</span>
              {% endif %}
            </td>
            <td class="px-4 py-3 text-center text-sm whitespace-nowrap">
              <a class="inline-flex items-center gap-2 bg-sky-600 hover:bg-sky-500 text-white px-3 py-1 rounded-md text-sm" href="{% url 'admin_barber_edit' b.pk %}">แก้ไข</a>
              <a class="inline-flex items-center gap-2 bg-red-600 hover:bg-red-500 text-white px-3 py-1 rounded-md text-sm ml-2" href="{% url 'admin_barber_delete' b.pk %}">ลบ</a>
            </td>
          </tr>
        {% empty %}
          <tr><td class="p-6 text-center text-gray-500" colspan="5">ยังไม่มีช่าง</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>
{% endblock %}
