{% extends "base.html" %}
{% block title %}เลือกวันและเวลา | CUTCAMP{% endblock %}
{% block content %}
<section class="max-w-4xl mx-auto p-8 space-y-6 bg-[#2a3731] rounded-2xl text-white shadow-xl">
  
  <!-- Header -->
  <header class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">
    <div>
      <h1 class="text-3xl sm:text-4xl font-extrabold tracking-tight">เลือกวันและเวลา</h1>

    </div>
  </header>

  <!-- Booking summary card -->
  <div class="bg-white rounded-2xl p-6 text-black shadow-md">
    <h3 class="text-sm font-medium text-gray-600 mb-3 flex items-center gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="4" width="14" height="14" rx="1"/><line x1="3" y1="8" x2="17" y2="8"/><line x1="8" y1="4" x2="8" y2="8"/><line x1="12" y1="4" x2="12" y2="8"/></svg>
      สรุปการจอง
    </h3>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm">
      <div>
        <p class="text-gray-500 text-xs flex items-center gap-1">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 7c0-1 1-2 2-2h.5M15 5h.5c1 0 2 1 2 2v10c0 1-1 2-2 2H5c-1 0-2-1-2-2V7c0-1 1-2 2-2M7 5l3-2 3 2M7 10h6M7 14h6"/></svg>
          บริการ
        </p>
        <p class="font-semibold text-gray-900 mt-1">{{ service.name }}</p>
      </div>
      <div>
        <p class="text-gray-500 text-xs flex items-center gap-1">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="10" cy="7" r="3"/><path d="M4 14c0-2 2-3 6-3s6 1 6 3v3H4v-3z"/></svg>
          ช่าง
        </p>
        <p class="font-semibold text-gray-900 mt-1">{{ barber.username }}</p>
      </div>
    </div>
  </div>

  <!-- Date selection form -->
  <div class="bg-white rounded-2xl p-6 text-black shadow-md">
    <h2 class="text-lg font-semibold mb-4 flex items-center gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="10" cy="10" r="9"/><path d="M10 5v5l3 2"/></svg>
      เลือกวันที่ต้องการ
    </h2>
    <form method="post" class="space-y-4">
      {% csrf_token %}
      <div class="space-y-2">
        <label class="flex text-sm font-medium text-gray-700 gap-1">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-500" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="4" width="14" height="14" rx="1"/><line x1="3" y1="8" x2="17" y2="8"/></svg>
          วันที่
        </label>
        <input type="date" name="date" class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-amber-600 focus:border-transparent outline-none" value="{{ date }}">
      </div>
      <button type="submit" class="w-full px-6 py-3 bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg shadow transition flex items-center justify-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><circle cx="8" cy="8" r="5"/><path d="M13 13l4 4"/></svg>
        ค้นหาเวลาว่าง
      </button>
    </form>
  </div>

  <!-- Time slots -->
  {% if slots %}
    <div class="bg-white rounded-2xl p-6 text-black shadow-md">
      <h2 class="text-lg font-semibold mb-4 flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="10" cy="10" r="9"/><path d="M10 5v5l3 2"/></svg>
        เวลาที่มีว่าง
      </h2>

      <div class="grid sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2">
        {% for s in slots %}
          <form method="post" action="{% url 'booking_confirm' service.id barber.id %}" class="inline">
            {% csrf_token %}
            <input type="hidden" name="start_at" value="{{ s|date:'c' }}">
            <button type="submit" class="w-full px-3 py-4 bg-gray-50 hover:bg-green-100 border border-gray-200 hover:border-green-400 rounded-lg font-semibold text-sm transition shadow-sm hover:shadow">
              {{ s|date:"H:i" }}
            </button>
          </form>
        {% endfor %}
      </div>
    </div>
  {% else %}
    <div class="bg-white rounded-2xl p-8 text-black text-center shadow-md border-l-4 border-red-500">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto text-gray-300 mb-4" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="10" cy="10" r="9"/><path d="M10 5v5l3 2"/><line x1="3" y1="17" x2="17" y2="3"/></svg>
      <p class="text-gray-600 font-medium">ไม่มีเวลาว่างในวันนี้</p>
      <p class="text-sm text-gray-500 mt-1">กรุณาลองเลือกวันอื่นจากปฏิทิน</p>
    </div>
  {% endif %}

  <!-- Progress indicator -->
  <div class="flex items-center justify-center gap-2 text-sm text-gray-300 pt-4">
    <span class="w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center">1</span>
    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path d="M8.5 12.5l2.5 2.5 5-5" stroke="currentColor" stroke-width="2" fill="none"/></svg>
    <span class="w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center">2</span>
    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path d="M8.5 12.5l2.5 2.5 5-5" stroke="currentColor" stroke-width="2" fill="none"/></svg>
    <span class="w-8 h-8 rounded-full bg-amber-600 flex items-center justify-center">3</span>
  </div>

</section>
{% endblock %}
