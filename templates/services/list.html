{% extends "base.html" %}
{% load static %}

{% block title %}บริการ | CUTCAMP{% endblock %}

{% block content %}
<section class="max-w-7xl mx-auto px-5 sm:px-6 lg:px-8 py-8">
  <!-- Heading -->
  <header class="mb-6 sm:mb-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold tracking-tight">
      <span class="text-white">
        บริการของร้าน
      </span>
    </h1>
    <p class="mt-2 text-sm sm:text-base text-slate-500 dark:text-slate-400">
      เลือกบริการที่ต้องการจากรายการด้านล่าง
    </p>
  </header>

  <!-- รายการบริการ -->
  <div class="grid gap-4 sm:gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
    {% for s in services %}
      <a href="{% url 'service_detail' s.pk %}"
         class="group relative flex flex-col overflow-hidden rounded-2xl bg-white/90 dark:bg-[#744d46]
                ring-1 ring-slate-200/70 dark:ring-slate-700 transition-all duration-200
                hover:-translate-y-1 hover:shadow-xl hover:ring-fuchsia-400/40 dark:hover:ring-fuchsia-500/40">

        {% if s.image %}
          <div class="relative aspect-[16/9] overflow-hidden">
            <img src="{{ s.image.url }}" alt="{{ s.name }}"
                 class="h-full w-full object-cover transition-transform duration-500 ease-out group-hover:scale-105" />
            <div class="pointer-events-none absolute inset-x-0 bottom-0 h-16 bg-gradient-to-t from-black/50 to-transparent"></div>
          </div>
        {% else %}
          <div class="aspect-[16/9] flex items-center justify-center bg-slate-100 dark:bg-slate-700 text-slate-400">
            <svg class="w-10 h-10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6">
              <rect x="3" y="5" width="18" height="14" rx="2"></rect>
              <path d="M3 16l5-5 4 4 3-3 3 3"></path>
              <circle cx="9" cy="9" r="1.5"></circle>
            </svg>
          </div>
        {% endif %}

        <div class="flex-1 p-4 sm:p-5">
          <h2 class="text-lg font-semibold text-slate-800 dark:text-slate-100">
            {{ s.name }}
          </h2>
          <p class="mt-1.5 text-sm text-slate-600 dark:text-slate-300 line-clamp-2">
            {{ s.description|default:"-" }}
          </p>

          <div class="mt-4 flex items-end justify-between gap-3">
            <!-- duration chip -->
            <div class="inline-flex items-center gap-2 rounded-full border border-slate-200 dark:border-slate-600
                        bg-slate-50 dark:bg-slate-700/60 px-3 py-1 text-xs sm:text-sm text-slate-600 dark:text-slate-200">
              <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
                <circle cx="12" cy="12" r="9"></circle>
                <path d="M12 7v5l3 3"></path>
              </svg>
              ระยะเวลา: {{ s.duration_min }} นาที
            </div>

            <!-- price -->
            <div class="text-right">
              <div class="text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400">ราคา</div>
              <div class="text-xl font-extrabold text-emerald-600 dark:text-emerald-400">฿{{ s.price }}</div>
            </div>
          </div>
        </div>

        <!-- corner accent -->
        <div class="pointer-events-none absolute -right-6 -top-6 h-16 w-16 rotate-45
                    bg-gradient-to-br from-fuchsia-400/20 to-indigo-400/20"></div>
      </a>
    {% empty %}
      <div class="col-span-full">
        <div class="rounded-xl border border-dashed border-slate-300 dark:border-slate-700 p-8 text-center text-slate-500 dark:text-slate-400">
          ยังไม่มีบริการ
        </div>
      </div>
    {% endfor %}
  </div>

  <!-- Pagination -->
  {% if is_paginated %}
    <nav class="mt-8 flex items-center justify-center gap-2">
      {% if page_obj.has_previous %}
        <a href="?{% if request.GET.q %}q={{request.GET.q}}&{% endif %}page={{ page_obj.previous_page_number }}"
           class="inline-flex items-center rounded-full border border-slate-200 dark:border-slate-700
                  bg-white dark:bg-slate-800 px-3.5 py-1.5 text-sm font-medium text-slate-700 dark:text-slate-200
                  hover:border-fuchsia-400/50 hover:text-fuchsia-600 dark:hover:text-fuchsia-400 transition">
          ‹ ก่อนหน้า
        </a>
      {% endif %}

      <span class="inline-flex items-center rounded-full bg-gradient-to-r from-fuchsia-500 to-indigo-500
                    px-3.5 py-1.5 text-sm font-semibold text-white shadow">
        หน้า {{ page_obj.number }} / {{ paginator.num_pages }}
      </span>

      {% if page_obj.has_next %}
        <a href="?{% if request.GET.q %}q={{request.GET.q}}&{% endif %}page={{ page_obj.next_page_number }}"
           class="inline-flex items-center rounded-full border border-slate-200 dark:border-slate-700
                  bg-white dark:bg-slate-800 px-3.5 py-1.5 text-sm font-medium text-slate-700 dark:text-slate-200
                  hover:border-fuchsia-400/50 hover:text-fuchsia-600 dark:hover:text-fuchsia-400 transition">
          ถัดไป ›
        </a>
      {% endif %}
    </nav>
  {% endif %}
</section>
{% endblock %}
